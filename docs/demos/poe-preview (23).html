<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Conservation Planning Dashboard</title>
    <style>
        :root {
            --primary-color: #2a9d8f;
            --secondary-color: #e9c46a;
            --background-light: #f8f9fa;
            --text-dark: #264653;
            --text-light: #f8f9fa;
            --success-color: #2a9d8f;
            --warning-color: #e76f51;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            background-color: var(--background-light);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 20px 0;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1, h2, h3 {
            margin-top: 0;
        }
        
        .tab-container {
            display: flex;
            flex-direction: column;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            transition: background-color 0.3s;
        }
        
        .tab:hover {
            background-color: #ddd;
        }
        
        .tab.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 5px 5px;
            background-color: white;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .profile {
            background-color: #f5f5f5;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            border-left: 5px solid var(--primary-color);
        }
        
        .assistant-suggestion {
            background-color: #f0f8ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid #4682b4;
        }
        
        .assistant-uncertainty {
            color: #777;
            font-style: italic;
        }
        
        .action-list {
            margin: 20px 0;
        }
        
        .action-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        
        .action-item input[type="checkbox"] {
            margin-right: 10px;
        }
        
        .action-item input[type="number"] {
            width: 80px;
            margin-left: 10px;
            padding: 5px;
        }
        
        .action-saving {
            font-weight: bold;
            color: var(--success-color);
            margin-left: auto;
        }
        
        .summary {
            background-color: #e8f4f8;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }
        
        .progress-container {
            margin: 20px 0;
            background-color: #e0e0e0;
            border-radius: 5px;
            height: 20px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0;
            transition: width 0.5s;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #1c7d71;
        }
        
        button.secondary {
            background-color: #6c757d;
        }
        
        button.secondary:hover {
            background-color: #5a6268;
        }
        
        .hidden {
            display: none;
        }
        
        .chart-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }
        
        /* Survey questions styling */
        .question {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .question label {
            display: block;
            margin-bottom: 5px;
        }
        
        .likert-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .likert-option {
            text-align: center;
        }
        
        .likert-option input {
            margin-bottom: 5px;
        }
        
        /* Result feedback */
        .result-feedback {
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            background-color: #f0f8ff;
            border-left: 4px solid var(--primary-color);
        }
        
        .result-positive {
            background-color: #d4edda;
            border-left: 4px solid var(--success-color);
        }
        
        .result-negative {
            background-color: #f8d7da;
            border-left: 4px solid var(--warning-color);
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                border-radius: 0;
                margin-right: 0;
                margin-bottom: 2px;
            }
            
            .likert-scale {
                flex-direction: column;
            }
            
            .likert-option {
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Energy Conservation Planning Dashboard</h1>
            <p>Interactive demonstrations of AI-assisted household energy planning studies</p>
        </div>
    </header>
    
    <div class="container">
        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" data-tab="study1">Study 1: AI Assistance</div>
                <div class="tab" data-tab="study2">Study 2: Cognitive Forcing</div>
                <div class="tab" data-tab="study3">Study 3: Uncertainty</div>
            </div>
            
            <!-- Study 1: Basic AI Assistance -->
            <div id="study1" class="tab-content active">
                <h2>Study 1: LLM Assistance and Household Energy Planning</h2>
                <p>This study explores whether AI assistance improves the quality of household energy conservation plans. Participants are randomly assigned to either a Control condition (no AI assistance) or an AI-Assisted condition.</p>
                
                <div class="form-control">
                    <label for="condition-select">Select condition:</label>
                    <select id="condition-select">
                        <option value="control">Control (No AI)</option>
                        <option value="ai">AI-Assisted</option>
                    </select>
                </div>
                
                <div class="profile">
                    <h3>Household Profile B: Family Home (Average Use)</h3>
                    <p><strong>Monthly usage:</strong> 900 kWh (approx. 30 kWh/day)</p>
                    <p><strong>Context:</strong> 3-4 bedroom house, mixed-fuel (gas heat, electric central A/C in summer)</p>
                    <p><strong>Breakdown:</strong></p>
                    <ul>
                        <li>Air Conditioning: 225 kWh (25%)</li>
                        <li>Water Heating: 135 kWh (15%)</li>
                        <li>Refrigerator: 90 kWh (10%)</li>
                        <li>Lighting: 80 kWh (9%)</li>
                        <li>Laundry (Washer/Dryer): 70 kWh (8%)</li>
                        <li>Other Appliances &amp; Electronics: 300 kWh (33%)</li>
                    </ul>
                    <p><strong>Goal:</strong> Reduce energy usage by 10% (90 kWh)</p>
                </div>
                
                <div id="ai-suggestion" class="assistant-suggestion hidden">
                    <h3>AI Assistant Recommendations:</h3>
                    <p>Based on your energy usage, here are some effective ways to save about 10% (~90 kWh per month):</p>
                    <ol>
                        <li><strong>Adjust your thermostat by 2°F.</strong> In summer, raise the A/C setting from 74°F to 76°F; in winter, lower heat from 70°F to 68°F at night. This can trim roughly 5-7% of your overall use by cutting HVAC demand. That's about 50-60 kWh saved.</li>
                        <li><strong>Wash laundry with cold water and line-dry some loads.</strong> Heating water for laundry uses a lot of energy; switching to cold for most loads can save ~10 kWh monthly, and air-drying clothes instead of using the dryer for, say, 4 loads a month saves another ~10-15 kWh. Combined, that's ~3% saved.</li>
                        <li><strong>Replace remaining incandescent light bulbs with LEDs.</strong> Efficient LED bulbs use ~80% less power. If you replace five 60W incandescents running ~3 hours/day, you'll save around 27 kWh in a month (around 3% of your usage).</li>
                        <li><strong>Reduce idle electronics usage.</strong> Turn off or unplug devices like gaming consoles and cable boxes when not in use -- this can save a few kWh.</li>
                    </ol>
                    <p>By adopting the first three changes, you can reach roughly 10% savings, and the fourth gives a small extra buffer.</p>
                </div>
                
                <h3>Create Your Energy-Saving Plan</h3>
                <p>Select actions you believe will help you achieve the 10% reduction goal (90 kWh):</p>
                
                <div class="action-list" id="study1-actions">
                    <!-- Actions will be dynamically inserted here by JavaScript -->
                </div>
                
                <div class="summary">
                    <h4>Your Plan Summary</h4>
                    <p>Total Estimated Savings: <span id="total-savings">0</span> kWh of 90 kWh goal</p>
                    <div class="progress-container">
                        <div id="savings-progress" class="progress-bar"></div>
                    </div>
                    <p>Percent of Goal: <span id="percent-goal">0%</span></p>
                </div>
                
                <div class="question">
                    <p>How difficult was it to create this energy saving plan?</p>
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="difficulty" id="diff1" value="1">
                            <label for="diff1">1<br>Very Easy</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="difficulty" id="diff2" value="2">
                            <label for="diff2">2</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="difficulty" id="diff3" value="3">
                            <label for="diff3">3</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="difficulty" id="diff4" value="4">
                            <label for="diff4">4</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="difficulty" id="diff5" value="5">
                            <label for="diff5">5<br>Very Difficult</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <p>How confident are you that your plan will achieve the 10% reduction goal?</p>
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="confidence" id="conf1" value="1">
                            <label for="conf1">1<br>Not Confident</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="confidence" id="conf2" value="2">
                            <label for="conf2">2</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="confidence" id="conf3" value="3">
                            <label for="conf3">3</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="confidence" id="conf4" value="4">
                            <label for="conf4">4</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="confidence" id="conf5" value="5">
                            <label for="conf5">5<br>Very Confident</label>
                        </div>
                    </div>
                </div>
                
                <button id="submit-study1">Submit Plan</button>
                
                <div id="study1-result" class="result-feedback hidden">
                    <!-- Results will be shown here after submission -->
                </div>
            </div>
            
            <!-- Study 2: Cognitive Forcing -->
            <div id="study2" class="tab-content">
                <h2>Study 2: User Engagement and Reliance</h2>
                <p>This study investigates how the manner of providing AI assistance affects user engagement and reliance on the AI. We introduce a "cognitive forcing" variation to encourage active user reflection.</p>
                
                <div class="profile">
                    <h3>Household Profile A: Small Apartment (Low Use)</h3>
                    <p><strong>Monthly usage:</strong> 300 kWh</p>
                    <p><strong>Context:</strong> 1-bedroom apartment, moderate climate, no air-conditioning (central heating is gas)</p>
                    <p><strong>Breakdown:</strong></p>
                    <ul>
                        <li>Always-on appliances (refrigerator, etc.): 90 kWh (30%)</li>
                        <li>Lighting: 45 kWh (15%)</li>
                        <li>Electronics (TV, computer): 60 kWh (20%)</li>
                        <li>Cooking and others: 105 kWh (35%)</li>
                    </ul>
                    <p><strong>Goal:</strong> Reduce energy usage by 10% (30 kWh)</p>
                </div>
                
                <div id="guess-phase">
                    <h3>Step 1: Your Initial Plan</h3>
                    <p>Before seeing any AI recommendations, select which actions you think would be most effective and estimate how much energy each would save:</p>
                    
                    <div class="action-list" id="user-guess-actions">
                        <!-- Actions will be dynamically inserted here by JavaScript -->
                    </div>
                    
                    <button id="submit-guess">Submit Your Estimates</button>
                </div>
                
                <div id="ai-phase" class="hidden">
                    <div class="assistant-suggestion">
                        <h3>AI Assistant Recommendations:</h3>
                        <p>Based on your apartment's energy profile, here are effective ways to save around 10% (30 kWh) per month:</p>
                        <ol>
                            <li><strong>Replace incandescent bulbs with LEDs.</strong> Since lighting is 15% of your usage, replacing 5-6 frequently used bulbs can save approximately 15 kWh monthly.</li>
                            <li><strong>Manage electronics more efficiently.</strong> Using power strips to completely turn off entertainment systems and computers when not in use can save around 8 kWh per month.</li>
                            <li><strong>Use the microwave instead of the oven when possible.</strong> For small meals and reheating, a microwave uses about 80% less energy than a conventional oven, saving approximately 5 kWh monthly.</li>
                            <li><strong>Wash clothes in cold water.</strong> Without an electric dryer, your laundry energy is mostly from water heating. Cold washing can save about 4 kWh monthly.</li>
                        </ol>
                    </div>
                    
                    <h3>Step 2: Your Final Plan</h3>
                    <p>Now that you've seen the AI's recommendations, you can adjust your plan. Select your final choices:</p>
                    
                    <div class="action-list" id="final-plan-actions">
                        <!-- Final action choices will be inserted here -->
                    </div>
                    
                    <div class="summary">
                        <h4>Your Plan Summary</h4>
                        <p>Total Estimated Savings: <span id="total-savings-study2">0</span> kWh of 30 kWh goal</p>
                        <div class="progress-container">
                            <div id="savings-progress-study2" class="progress-bar"></div>
                        </div>
                        <p>Percent of Goal: <span id="percent-goal-study2">0%</span></p>
                    </div>
                    
                    <div class="question">
                        <p>How did the AI's suggestions compare to your initial estimates?</p>
                        <select id="comparison-rating">
                            <option value="">Please select...</option>
                            <option value="1">Completely different from my estimates</option>
                            <option value="2">Somewhat different from my estimates</option>
                            <option value="3">Similar to my estimates</option>
                            <option value="4">Confirmed most of my estimates</option>
                            <option value="5">Exactly what I estimated</option>
                        </select>
                    </div>
                    
                    <div class="question">
                        <p>How much do you trust the AI's recommendations?</p>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="trust" id="trust1" value="1">
                                <label for="trust1">1<br>Not at all</label>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="trust" id="trust2" value="2">
                                <label for="trust2">2</label>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="trust" id="trust3" value="3">
                                <label for="trust3">3</label>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="trust" id="trust4" value="4">
                                <label for="trust4">4</label>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="trust" id="trust5" value="5">
                                <label for="trust5">5<br>Completely</label>
                            </div>
                        </div>
                    </div>
                    
                    <button id="submit-study2">Submit Final Plan</button>
                </div>
                
                <div id="study2-result" class="result-feedback hidden">
                    <!-- Results will be shown here after submission -->
                </div>
            </div>
            
            <!-- Study 3: Uncertainty Communication -->
            <div id="study3" class="tab-content">
                <h2>Study 3: Communicating Uncertainty</h2>
                <p>This study investigates how conveying uncertainty in the AI's recommendations influences user trust, reliance, and risk perception.</p>
                
                <div class="form-control">
                    <label for="uncertainty-select">Select condition:</label>
                    <select id="uncertainty-select">
                        <option value="certain">Certain Advice</option>
                        <option value="uncertain">Uncertain Advice</option>
                    </select>
                </div>
                
                <div class="profile">
                    <h3>Household Profile C: Large Home (High Use)</h3>
                    <p><strong>Monthly usage:</strong> 1,500 kWh</p>
                    <p><strong>Context:</strong> 5-bedroom house in a hot climate, all-electric (electric heat pump for heating, central A/C, electric water heater, pool pump)</p>
                    <p><strong>Breakdown:</strong></p>
                    <ul>
                        <li>HVAC (heating &amp; cooling): 750 kWh (50%)</li>
                        <li>Water Heating: 150 kWh (10%)</li>
                        <li>Pool Pump: 120 kWh (8%)</li>
                        <li>Refrigerator: 75 kWh (5%)</li>
                        <li>Lighting: 90 kWh (6%)</li>
                        <li>Others (multiple TVs, computers, extra freezer, etc.): 315 kWh (21%)</li>
                    </ul>
                    <p><strong>Goal:</strong> Reduce energy usage by 10% (150 kWh)</p>
                </div>
                
                <div id="advice-certain" class="assistant-suggestion">
                    <h3>AI Assistant Recommendations (Certain):</h3>
                    <p>To achieve 150 kWh savings (10%), consider these actions:</p>
                    <ol>
                        <li><strong>Optimize your pool pump schedule.</strong> Running the pool pump fewer hours (or on an energy-efficient timer) will save 40 kWh per month, about 2.7% of your usage.</li>
                        <li><strong>Thermostat adjustment:</strong> Increase your cooling setting by 2°F. Given your heavy A/C use, this will save 90 kWh monthly, which is 6% of your total usage.</li>
                        <li><strong>Water heating:</strong> Lower your water heater to 120°F (if higher) and use the dishwasher's air-dry setting. This will save 15 kWh.</li>
                        <li><strong>Upgrade to LED lighting.</strong> Replacing your most frequently used bulbs with LEDs will save approximately 10 kWh per month.</li>
                    </ol>
                    <p>These measures in combination will achieve a 10.3% reduction (155 kWh).</p>
                </div>
                
                <div id="advice-uncertain" class="assistant-suggestion hidden">
                    <h3>AI Assistant Recommendations (with Uncertainty):</h3>
                    <p>To achieve approximately 150 kWh savings (10%), consider these actions:</p>
                    <ol>
                        <li><strong>Optimize your pool pump schedule.</strong> Running the pool pump fewer hours (or on an energy-efficient timer) could save about 40 kWh per month (±10 kWh depending on pool size and current schedule), approximately 2.7% of your usage.</li>
                        <li><strong>Thermostat adjustment:</strong> Increase your cooling setting by 2°F. Given your heavy A/C use, this will likely save around 90 kWh monthly (range: 70-110 kWh depending on climate conditions and home insulation), which is about 6% of your total usage.</li>
                        <li><strong>Water heating:</strong> Lower your water heater to 120°F (if higher) and use the dishwasher's air-dry setting. This should save approximately 15 kWh (±5 kWh depending on current temperature setting and household usage patterns).</li>
                        <li><strong>Upgrade to LED lighting.</strong> Replacing your most frequently used bulbs with LEDs will save approximately 10 kWh per month (±3 kWh depending on how many hours the lights are used).</li>
                    </ol>
                    <p class="assistant-uncertainty">Note: Actual savings may vary based on specific household behavior, weather conditions, and equipment efficiency. The combined measures should achieve between 125-175 kWh reduction (8.3%-11.7%).</p>
                </div>
                
                <h3>Create Your Energy-Saving Plan</h3>
                <p>Select actions you believe will help you achieve the 10% reduction goal (150 kWh):</p>
                
                <div class="action-list" id="study3-actions">
                    <!-- Actions will be dynamically inserted here by JavaScript -->
                </div>
                
                <div class="summary">
                    <h4>Your Plan Summary</h4>
                    <p>Total Estimated Savings: <span id="total-savings-study3">0</span> kWh of 150 kWh goal</p>
                    <div class="progress-container">
                        <div id="savings-progress-study3" class="progress-bar"></div>
                    </div>
                    <p>Percent of Goal: <span id="percent-goal-study3">0%</span></p>
                </div>
                
                <div class="question">
                    <p>How confident are you that your plan will achieve at least the 10% reduction goal?</p>
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="s3-confidence" id="s3-conf1" value="1">
                            <label for="s3-conf1">1<br>Not Confident</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-confidence" id="s3-conf2" value="2">
                            <label for="s3-conf2">2</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-confidence" id="s3-conf3" value="3">
                            <label for="s3-conf3">3</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-confidence" id="s3-conf4" value="4">
                            <label for="s3-conf4">4</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-confidence" id="s3-conf5" value="5">
                            <label for="s3-conf5">5<br>Very Confident</label>
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <p>Would you prefer to add an additional "safety margin" to your plan?</p>
                    <select id="safety-margin">
                        <option value="none">No, my plan is sufficient</option>
                        <option value="small">Yes, add a small buffer (5% extra)</option>
                        <option value="medium">Yes, add a medium buffer (10% extra)</option>
                        <option value="large">Yes, add a large buffer (20% extra)</option>
                    </select>
                </div>
                
                <div class="question">
                    <p>How much do you trust the AI's recommendations?</p>
                    <div class="likert-scale">
                        <div class="likert-option">
                            <input type="radio" name="s3-trust" id="s3-trust1" value="1">
                            <label for="s3-trust1">1<br>Not at all</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-trust" id="s3-trust2" value="2">
                            <label for="s3-trust2">2</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-trust" id="s3-trust3" value="3">
                            <label for="s3-trust3">3</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-trust" id="s3-trust4" value="4">
                            <label for="s3-trust4">4</label>
                        </div>
                        <div class="likert-option">
                            <input type="radio" name="s3-trust" id="s3-trust5" value="5">
                            <label for="s3-trust5">5<br>Completely</label>
                        </div>
                    </div>
                </div>
                
                <button id="submit-study3">Submit Plan</button>
                
                <div id="study3-result" class="result-feedback hidden">
                    <!-- Results will be shown here after submission -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Define energy-saving actions with their true savings values
        const study1Actions = [
            { id: 's1-a1', action: 'Adjust thermostat by 2°F (warmer in summer/cooler in winter)', saving: 55, category: 'HVAC' },
            { id: 's1-a2', action: 'Wash clothes in cold water instead of hot', saving: 10, category: 'Laundry' },
            { id: 's1-a3', action: 'Line-dry clothes instead of using the dryer (4 loads/month)', saving: 12, category: 'Laundry' },
            { id: 's1-a4', action: 'Replace 5 incandescent bulbs with LEDs', saving: 27, category: 'Lighting' },
            { id: 's1-a5', action: 'Use power strips to eliminate standby power', saving: 5, category: 'Electronics' },
            { id: 's1-a6', action: 'Clean refrigerator coils', saving: 3, category: 'Appliances' },
            { id: 's1-a7', action: 'Lower water heater temperature to 120°F', saving: 8, category: 'Water Heating' },
            { id: 's1-a8', action: 'Take shorter showers (reduce by 2 minutes)', saving: 7, category: 'Water Heating' },
            { id: 's1-a9', action: 'Turn off lights when leaving rooms', saving: 4, category: 'Lighting' },
            { id: 's1-a10', action: 'Unplug phone/laptop chargers when not in use', saving: 1, category: 'Electronics' }
        ];

        const study2Actions = [
            { id: 's2-a1', action: 'Replace incandescent bulbs with LEDs', saving: 15, category: 'Lighting' },
            { id: 's2-a2', action: 'Manage electronics with power strips', saving: 8, category: 'Electronics' },
            { id: 's2-a3', action: 'Use microwave instead of oven when possible', saving: 5, category: 'Cooking' },
            { id: 's2-a4', action: 'Wash clothes in cold water', saving: 4, category: 'Laundry' },
            { id: 's2-a5', action: 'Adjust refrigerator temperature setting', saving: 2, category: 'Appliances' },
            { id: 's2-a6', action: 'Turn off lights when leaving rooms', saving: 3, category: 'Lighting' },
            { id: 's2-a7', action: 'Unplug chargers and small appliances', saving: 2, category: 'Electronics' },
            { id: 's2-a8', action: 'Use task lighting instead of overhead lighting', saving: 3, category: 'Lighting' }
        ];

        const study3Actions = [
            { id: 's3-a1', action: 'Optimize pool pump schedule', saving: 40, uncertainty: 10, category: 'Pool' },
            { id: 's3-a2', action: 'Increase cooling thermostat by 2°F', saving: 90, uncertainty: 20, category: 'HVAC' },
            { id: 's3-a3', action: 'Lower water heater to 120°F and use air-dry', saving: 15, uncertainty: 5, category: 'Water Heating' },
            { id: 's3-a4', action: 'Upgrade to LED lighting', saving: 10, uncertainty: 3, category: 'Lighting' },
            { id: 's3-a5', action: 'Reduce second refrigerator/freezer usage', saving: 30, uncertainty: 8, category: 'Appliances' },
            { id: 's3-a6', action: 'Use ceiling fans instead of lowering AC', saving: 20, uncertainty: 7, category: 'HVAC' },
            { id: 's3-a7', action: 'Clean/replace HVAC air filters', saving: 8, uncertainty: 3, category: 'HVAC' },
            { id: 's3-a8', action: 'Install smart power strips for entertainment system', saving: 5, uncertainty: 2, category: 'Electronics' }
        ];

        // Tab switching functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and content
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // Study 1: AI Assistance vs Control
        // Toggle AI assistance visibility based on condition select
        document.getElementById('condition-select').addEventListener('change', function() {
            const aiSuggestion = document.getElementById('ai-suggestion');
            aiSuggestion.classList.toggle('hidden', this.value === 'control');
        });

        // Populate action list for Study 1
        const study1ActionsList = document.getElementById('study1-actions');
        study1Actions.forEach(action => {
            const actionItem = document.createElement('div');
            actionItem.className = 'action-item';
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = action.id;
            checkbox.dataset.saving = action.saving;
            
            const label = document.createElement('label');
            label.htmlFor = action.id;
            label.textContent = action.action;
            
            const savingSpan = document.createElement('span');
            savingSpan.className = 'action-saving';
            savingSpan.textContent = `${action.saving} kWh`;
            
            actionItem.appendChild(checkbox);
            actionItem.appendChild(label);
            actionItem.appendChild(savingSpan);
            
            study1ActionsList.appendChild(actionItem);
        });

        // Update savings for Study 1 when actions are checked/unchecked
        study1ActionsList.addEventListener('change', updateStudy1Savings);

        function updateStudy1Savings() {
            let totalSavings = 0;
            document.querySelectorAll('#study1-actions input[type="checkbox"]:checked').forEach(checkbox => {
                totalSavings += parseInt(checkbox.dataset.saving);
            });
            
            document.getElementById('total-savings').textContent = totalSavings;
            
            // Update progress bar
            const percentComplete = Math.min(100, (totalSavings / 90) * 100);
            document.getElementById('savings-progress').style.width = percentComplete + '%';
            document.getElementById('percent-goal').textContent = Math.round(percentComplete) + '%';
        }

        // Handle Study 1 submission
        document.getElementById('submit-study1').addEventListener('click', function() {
            const totalSavings = parseInt(document.getElementById('total-savings').textContent);
            const difficultyRating = document.querySelector('input[name="difficulty"]:checked')?.value;
            const confidenceRating = document.querySelector('input[name="confidence"]:checked')?.value;
            
            if (!difficultyRating || !confidenceRating) {
                alert("Please complete all questions before submitting.");
                return;
            }
            
            const resultElement = document.getElementById('study1-result');
            resultElement.innerHTML = '';
            
            const resultHeading = document.createElement('h3');
            resultHeading.textContent = 'Plan Evaluation:';
            
            const resultContent = document.createElement('p');
            if (totalSavings >= 90) {
                resultElement.className = 'result-feedback result-positive';
                resultContent.textContent = `Your plan is estimated to save ${totalSavings} kWh (${Math.round((totalSavings/900)*100)}% of your monthly usage), which meets or exceeds the 10% reduction goal. Great job!`;
            } else {
                resultElement.className = 'result-feedback result-negative';
                resultContent.textContent = `Your plan is estimated to save ${totalSavings} kWh (${Math.round((totalSavings/900)*100)}% of your monthly usage), which falls short of the 10% reduction goal. Consider selecting additional actions or focusing on higher-impact changes.`;
            }
            
            resultElement.appendChild(resultHeading);
            resultElement.appendChild(resultContent);
            
            // Add insights based on condition
            const insightsPara = document.createElement('p');
            const condition = document.getElementById('condition-select').value;
            
            if (condition === 'ai') {
                insightsPara.innerHTML = '<strong>Insights:</strong> Users with AI assistance tend to select higher-impact actions and achieve the goal more frequently than those without assistance. The AI helps identify actions with the largest savings potential.';
            } else {
                insightsPara.innerHTML = '<strong>Insights:</strong> Without assistance, users often focus on familiar but lower-impact actions (like turning off lights) instead of higher-impact changes like thermostat adjustments or appliance upgrades.';
            }
            
            resultElement.appendChild(insightsPara);
            resultElement.classList.remove('hidden');
            
            // Scroll to result
            resultElement.scrollIntoView({ behavior: 'smooth' });
        });

        // Study 2: Cognitive Forcing
        // Populate guess actions for Study 2
        const guessActionsList = document.getElementById('user-guess-actions');
        study2Actions.forEach(action => {
            const actionItem = document.createElement('div');
            actionItem.className = 'action-item';
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = `guess-${action.id}`;
            checkbox.dataset.action = action.action;
            
            const label = document.createElement('label');
            label.htmlFor = `guess-${action.id}`;
            label.textContent = action.action;
            
            const estimateInput = document.createElement('input');
            estimateInput.type = 'number';
            estimateInput.min = '0';
            estimateInput.max = '100';
            estimateInput.placeholder = 'kWh';
            estimateInput.id = `estimate-${action.id}`;
            
            actionItem.appendChild(checkbox);
            actionItem.appendChild(label);
            actionItem.appendChild(estimateInput);
            
            guessActionsList.appendChild(actionItem);
        });

        // Handle user estimate submission
        document.getElementById('submit-guess').addEventListener('click', function() {
            const checkedActions = document.querySelectorAll('#user-guess-actions input[type="checkbox"]:checked');
            
            if (checkedActions.length === 0) {
                alert("Please select at least one action before continuing.");
                return;
            }
            
            const actionsMissingEstimates = Array.from(checkedActions).filter(checkbox => {
                const estimateInput = document.getElementById(`estimate-${checkbox.id.replace('guess-', '')}`);
                return !estimateInput.value;
            });
            
            if (actionsMissingEstimates.length > 0) {
                alert("Please provide an estimate for all selected actions.");
                return;
            }
            
            // Show AI phase
            document.getElementById('guess-phase').classList.add('hidden');
            document.getElementById('ai-phase').classList.remove('hidden');
            
            // Populate final plan actions with both user guesses and AI recommendations
            const finalPlanActions = document.getElementById('final-plan-actions');
            
            study2Actions.forEach(action => {
                const userCheckbox = document.getElementById(`guess-${action.id}`);
                const userEstimate = document.getElementById(`estimate-${action.id}`).value;
                const userSelected = userCheckbox.checked;
                
                const actionItem = document.createElement('div');
                actionItem.className = 'action-item';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `final-${action.id}`;
                checkbox.dataset.saving = action.saving;
                // Pre-check the checkbox if the user selected it in their guess
                checkbox.checked = userSelected;
                
                const label = document.createElement('label');
                label.htmlFor = `final-${action.id}`;
                label.textContent = action.action;
                
                const infoDiv = document.createElement('div');
                infoDiv.style.marginLeft = '10px';
                infoDiv.style.fontSize = '0.9em';
                
                if (userSelected) {
                    infoDiv.innerHTML = `Your estimate: <span style="color:#e76f51;">${userEstimate} kWh</span> | AI estimate: <span style="color:#2a9d8f;">${action.saving} kWh</span>`;
                } else {
                    infoDiv.innerHTML = `AI estimate: <span style="color:#2a9d8f;">${action.saving} kWh</span>`;
                }
                
                actionItem.appendChild(checkbox);
                actionItem.appendChild(label);
                actionItem.appendChild(infoDiv);
                
                finalPlanActions.appendChild(actionItem);
            });

            // Add event listeners to update final savings
            finalPlanActions.addEventListener('change', updateStudy2Savings);
            updateStudy2Savings(); // Initial update
        });

        function updateStudy2Savings() {
            let totalSavings = 0;
            document.querySelectorAll('#final-plan-actions input[type="checkbox"]:checked').forEach(checkbox => {
                totalSavings += parseInt(checkbox.dataset.saving);
            });
            
            document.getElementById('total-savings-study2').textContent = totalSavings;
            
            // Update progress bar
            const percentComplete = Math.min(100, (totalSavings / 30) * 100);
            document.getElementById('savings-progress-study2').style.width = percentComplete + '%';
            document.getElementById('percent-goal-study2').textContent = Math.round(percentComplete) + '%';
        }

        // Handle Study 2 final submission
        document.getElementById('submit-study2').addEventListener('click', function() {
            const totalSavings = parseInt(document.getElementById('total-savings-study2').textContent);
            const comparisonRating = document.getElementById('comparison-rating').value;
            const trustRating = document.querySelector('input[name="trust"]:checked')?.value;
            
            if (!comparisonRating || !trustRating) {
                alert("Please complete all questions before submitting.");
                return;
            }
            
            const resultElement = document.getElementById('study2-result');
            resultElement.innerHTML = '';
            
            const resultHeading = document.createElement('h3');
            resultHeading.textContent = 'Plan Evaluation:';
            
            const resultContent = document.createElement('p');
            if (totalSavings >= 30) {
                resultElement.className = 'result-feedback result-positive';
                resultContent.textContent = `Your final plan is estimated to save ${totalSavings} kWh (${Math.round((totalSavings/300)*100)}% of your monthly usage), which meets or exceeds the 10% reduction goal.`;
            } else {
                resultElement.className = 'result-feedback result-negative';
                resultContent.textContent = `Your final plan is estimated to save ${totalSavings} kWh (${Math.round((totalSavings/300)*100)}% of your monthly usage), which falls short of the 10% reduction goal.`;
            }
            
            resultElement.appendChild(resultHeading);
            resultElement.appendChild(resultContent);
            
            // Add cognitive forcing insights
            const insightsPara = document.createElement('p');
            insightsPara.innerHTML = '<strong>Cognitive Forcing Insights:</strong> By asking you to make estimates before seeing AI suggestions, this interface encourages active engagement with the energy-saving problem. Research shows this approach can reduce over-reliance on AI advice and improve understanding of the domain. Users who first think through the problem themselves are more likely to thoughtfully integrate AI advice with their own knowledge rather than accepting recommendations uncritically.';
            
            resultElement.appendChild(insightsPara);
            resultElement.classList.remove('hidden');
            
            // Scroll to result
            resultElement.scrollIntoView({ behavior: 'smooth' });
        });

        // Study 3: Uncertainty Communication
        // Toggle between certain and uncertain advice
        document.getElementById('uncertainty-select').addEventListener('change', function() {
            document.getElementById('advice-certain').classList.toggle('hidden', this.value === 'uncertain');
            document.getElementById('advice-uncertain').classList.toggle('hidden', this.value === 'certain');
        });

        // Populate action list for Study 3
        const study3ActionsList = document.getElementById('study3-actions');
        
        function renderStudy3Actions() {
            study3ActionsList.innerHTML = ''; // Clear existing actions
            
            const uncertaintyCondition = document.getElementById('uncertainty-select').value === 'uncertain';
            
            study3Actions.forEach(action => {
                const actionItem = document.createElement('div');
                actionItem.className = 'action-item';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = action.id;
                checkbox.dataset.saving = action.saving;
                
                const label = document.createElement('label');
                label.htmlFor = action.id;
                label.textContent = action.action;
                
                const savingSpan = document.createElement('span');
                savingSpan.className = 'action-saving';
                
                if (uncertaintyCondition) {
                    savingSpan.textContent = `${action.saving} kWh (±${action.uncertainty})`;
                } else {
                    savingSpan.textContent = `${action.saving} kWh`;
                }
                
                actionItem.appendChild(checkbox);
                actionItem.appendChild(label);
                actionItem.appendChild(savingSpan);
                
                study3ActionsList.appendChild(actionItem);
            });
        }
        
        renderStudy3Actions();
        
        // Update when condition changes
        document.getElementById('uncertainty-select').addEventListener('change', renderStudy3Actions);

        // Update savings for Study 3 when actions are checked/unchecked
        study3ActionsList.addEventListener('change', updateStudy3Savings);

        function updateStudy3Savings() {
            let totalSavings = 0;
            document.querySelectorAll('#study3-actions input[type="checkbox"]:checked').forEach(checkbox => {
                totalSavings += parseInt(checkbox.dataset.saving);
            });
            
            document.getElementById('total-savings-study3').textContent = totalSavings;
            
            // Update progress bar
            const percentComplete = Math.min(100, (totalSavings / 150) * 100);
            document.getElementById('savings-progress-study3').style.width = percentComplete + '%';
            document.getElementById('percent-goal-study3').textContent = Math.round(percentComplete) + '%';
        }

        // Handle Study 3 submission
        document.getElementById('submit-study3').addEventListener('click', function() {
            const totalSavings = parseInt(document.getElementById('total-savings-study3').textContent);
            const confidenceRating = document.querySelector('input[name="s3-confidence"]:checked')?.value;
            const trustRating = document.querySelector('input[name="s3-trust"]:checked')?.value;
            const safetyMargin = document.getElementById('safety-margin').value;
            
            if (!confidenceRating || !trustRating || !safetyMargin) {
                alert("Please complete all questions before submitting.");
                return;
            }
            
            const resultElement = document.getElementById('study3-result');
            resultElement.innerHTML = '';
            
            const resultHeading = document.createElement('h3');
            resultHeading.textContent = 'Plan Evaluation:';
            
            const resultContent = document.createElement('p');
            if (totalSavings >= 150) {
                resultElement.className = 'result-feedback result-positive';
                resultContent.textContent = `Your plan is estimated to save ${totalSavings} kWh (${Math.round((totalSavings/1500)*100)}% of your monthly usage), which meets or exceeds the 10% reduction goal.`;
            } else {
                resultElement.className = 'result-feedback result-negative';
                resultContent.textContent = `Your plan is estimated to save ${totalSavings} kWh (${Math.round((totalSavings/1500)*100)}% of your monthly usage), which falls short of the 10% reduction goal.`;
            }
            
            resultElement.appendChild(resultHeading);
            resultElement.appendChild(resultContent);
            
            // Add uncertainty insights
            const insightsPara = document.createElement('p');
            const uncertaintyCondition = document.getElementById('uncertainty-select').value === 'uncertain';
            
            if (uncertaintyCondition) {
                insightsPara.innerHTML = '<strong>Uncertainty Communication Insights:</strong> When AI systems communicate uncertainty in their estimates, users tend to build in safety margins and develop more resilient plans. This transparency can actually increase trust in the AI system, as it acknowledges the inherent variability in energy consumption. Research suggests that honest uncertainty communication leads to more realistic expectations and better long-term satisfaction with results.';
            } else {
                insightsPara.innerHTML = '<strong>Certain Advice Insights:</strong> When AI systems present estimates without uncertainty information, users may develop overconfidence in specific numbers. This can lead to disappointment if actual results vary from predictions. While certain-sounding advice may be perceived as more authoritative initially, it may undermine trust if outcomes differ from expectations.';
            }
            
            resultElement.appendChild(insightsPara);
            
            // Add safety margin analysis
            if (safetyMargin !== 'none') {
                const safetyPara = document.createElement('p');
                safetyPara.innerHTML = `<strong>Safety Margin Analysis:</strong> You chose to add a ${safetyMargin} buffer to your plan. This proactive approach helps account for variability in actual energy savings and increases the likelihood of meeting your reduction goals even if some actions perform below expectations.`;
                resultElement.appendChild(safetyPara);
            }
            
            resultElement.classList.remove('hidden');
            
            // Scroll to result
            resultElement.scrollIntoView({ behavior: 'smooth' });
        });
    </script>


</body></html>